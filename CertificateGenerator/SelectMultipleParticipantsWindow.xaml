<Window x:Class="CertificateGenerator.SelectMultipleParticipantsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Výber účastníkov" 
        Height="650" 
        Width="800"
        FontSize="14"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundColor}">

    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Style="{StaticResource Card}" Margin="0,0,0,20">
            <StackPanel>
                <TextBlock Text="Výber účastníkov pre hromadné generovanie" 
                           FontSize="18" FontWeight="Bold"
                           Foreground="{StaticResource TextPrimaryColor}"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Search -->
        <Border Grid.Row="1" Style="{StaticResource Card}" Margin="0,0,0,15">
            <StackPanel>
                <Label Content="🔍 Vyhľadávanie:" Style="{StaticResource ModernLabel}"/>
                <TextBox x:Name="TxtSearch" 
                         Style="{StaticResource ModernTextBox}"
                         TextChanged="TxtSearch_TextChanged"/>
            </StackPanel>
        </Border>

        <!-- DataGrid -->
        <Border Grid.Row="2" Style="{StaticResource Card}" Margin="0,0,0,15">
            <DataGrid x:Name="DgParticipants"
                      Style="{StaticResource ModernDataGrid}"
                      BorderThickness="0"
                      SelectionMode="Extended">
                <DataGrid.Columns>
                    <DataGridCheckBoxColumn Width="50" 
                                           Binding="{Binding IsSelected, UpdateSourceTrigger=PropertyChanged}"/>
                    <DataGridTextColumn Header="Meno" Binding="{Binding Name}" Width="*"/>
                    <DataGridTextColumn Header="Dátum narodenia" 
                                       Binding="{Binding BirthDate, StringFormat=dd.MM.yyyy}" 
                                       Width="130"/>
                    <DataGridTextColumn Header="Reg. číslo" 
                                       Binding="{Binding RegistrationNumber}" 
                                       Width="120"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>

        <!-- Stats -->
        <Border Grid.Row="3" Background="{StaticResource InputBackground}"
                CornerRadius="8" Padding="15" Margin="0,0,0,15">
            <TextBlock HorizontalAlignment="Center">
                <Run Text="Vybraných: "/>
                <Run x:Name="TxtSelectedCount" Text="0" 
                     Foreground="{StaticResource SuccessColor}" FontWeight="Bold"/>
                <Run Text=" účastníkov"/>
            </TextBlock>
        </Border>

        <!-- Buttons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Center">
            <Button Content="Vybrať všetkých" 
                    Style="{StaticResource ModernButton}"
                    Padding="25,12" Margin="0,0,10,0"
                    Click="SelectAll_Click"/>
            <Button Content="✓ Potvrdiť výber" 
                    Style="{StaticResource SuccessButton}"
                    Padding="25,12" Margin="0,0,10,0"
                    Click="Confirm_Click"/>
            <Button Content="✖️ Zrušiť" 
                    Style="{StaticResource SecondaryButton}"
                    Width="120" Height="44"
                    Click="Cancel_Click"/>
        </StackPanel>
    </Grid>
</Window>