<Window x:Class="CertificateGenerator.SelectMultipleTopicsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Výber tém podujatí" 
        Height="600" 
        Width="700"
        FontSize="14"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundColor}">

    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Style="{StaticResource Card}" Margin="0,0,0,20">
            <StackPanel>
                <TextBlock Text="Výber tém pre hromadné generovanie" 
                           FontSize="18" FontWeight="Bold"
                           Foreground="{StaticResource TextPrimaryColor}"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Search -->
        <Border Grid.Row="1" Style="{StaticResource Card}" Margin="0,0,0,15">
            <StackPanel>
                <Label Content="🔍 Vyhľadávanie:" Style="{StaticResource ModernLabel}"/>
                <TextBox x:Name="TxtSearch" 
                         Style="{StaticResource ModernTextBox}"
                         TextChanged="TxtSearch_TextChanged"/>
            </StackPanel>
        </Border>

        <!-- DataGrid -->
        <Border Grid.Row="2" Style="{StaticResource Card}" Margin="0,0,0,15">
            <DataGrid x:Name="DgTopics"
                      Style="{StaticResource ModernDataGrid}"
                      BorderThickness="0"
                      SelectionMode="Extended">
                <DataGrid.Columns>
                    <DataGridCheckBoxColumn Width="50" 
                                           Binding="{Binding IsSelected, UpdateSourceTrigger=PropertyChanged}"/>
                    <DataGridTextColumn Header="Téma podujatia" Binding="{Binding Topic}" Width="*"/>
                    <DataGridTextColumn Header="Popis" Binding="{Binding Description}" Width="*"/>
                    <DataGridTextColumn Header="Použité" Binding="{Binding UsageCount}" Width="80"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>

        <!-- Stats -->
        <Border Grid.Row="3" Background="{StaticResource InputBackground}"
                CornerRadius="8" Padding="15" Margin="0,0,0,15">
            <TextBlock HorizontalAlignment="Center">
                <Run Text="Vybraných: "/>
                <Run x:Name="TxtSelectedCount" Text="0" 
                     Foreground="{StaticResource SuccessColor}" FontWeight="Bold"/>
                <Run Text=" tém"/>
            </TextBlock>
        </Border>

        <!-- Buttons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Center">
            <Button Content="✓ Vybrať všetky" 
                    Style="{StaticResource ModernButton}"
                    Padding="25,12" Margin="0,0,10,0"
                    Click="SelectAll_Click"/>
            <Button Content="✓ Potvrdiť výber" 
                    Style="{StaticResource SuccessButton}"
                    Padding="25,12" Margin="0,0,10,0"
                    Click="Confirm_Click"/>
            <Button Content="✖️ Zrušiť" 
                    Style="{StaticResource SecondaryButton}"
                    Padding="25,12"
                    Click="Cancel_Click"/>
        </StackPanel>
    </Grid>
</Window>